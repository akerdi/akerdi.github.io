<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>20200830浦东App问题排查 | aKer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="记录下和老大调整服务器内存大小周末没事来加个班写写东西。老大过来调整服务器内存，就帮忙托手。 首先是内存条 123 456 789 左右两边各9个内存条插槽。16G插满就有288G。 1、4、7 三个是白色，如果只有6根内存条，首先先插满左右两边各1、4、7白色插槽，规格最好差不多。如果是插到左右各123上服务器启动时会报warning。正常后，内存读写速度会到1066HZ左右。 如果继续往上插，">
<meta property="og:type" content="article">
<meta property="og:title" content="20200830浦东App问题排查">
<meta property="og:url" content="https://akerdi.github.io/2020/11/29/20200830浦东App问题排查/index.html">
<meta property="og:site_name" content="aKer">
<meta property="og:description" content="记录下和老大调整服务器内存大小周末没事来加个班写写东西。老大过来调整服务器内存，就帮忙托手。 首先是内存条 123 456 789 左右两边各9个内存条插槽。16G插满就有288G。 1、4、7 三个是白色，如果只有6根内存条，首先先插满左右两边各1、4、7白色插槽，规格最好差不多。如果是插到左右各123上服务器启动时会报warning。正常后，内存读写速度会到1066HZ左右。 如果继续往上插，">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2023-03-07T09:24:38.380Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="20200830浦东App问题排查">
<meta name="twitter:description" content="记录下和老大调整服务器内存大小周末没事来加个班写写东西。老大过来调整服务器内存，就帮忙托手。 首先是内存条 123 456 789 左右两边各9个内存条插槽。16G插满就有288G。 1、4、7 三个是白色，如果只有6根内存条，首先先插满左右两边各1、4、7白色插槽，规格最好差不多。如果是插到左右各123上服务器启动时会报warning。正常后，内存读写速度会到1066HZ左右。 如果继续往上插，">
  
  <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css">
  <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      document.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightBlock(block);
      });
    });
  </script>
  <link rel="stylesheet" href="/css/index.css">
</head>
</html>
<body style="


  background-color: #eff0f6

">
  <div id="container">
    <nav id="nav">
  <header class="header">
    <a href="/" class="title">Clover Tuan</a>
  </header>
  <div class="ctnWrap">
    <div class="icons">
      
        
          
            <a href="https://dribbble.com/clovertuan" target="_blank" class="nav-icn iconfont icon-dribbble"></a>
          
        
          
            <a href="https://www.behance.net/clovertuan" target="_blank" class="nav-icn iconfont icon-behance"></a>
          
        
          
            <a href="http://clovertuan.lofter.com/" target="_blank" class="nav-icn iconfont icon-lofter"></a>
          
        
          
            <a href="https://www.instagram.com/clovertuan/" target="_blank" class="nav-icn iconfont icon-instagram"></a>
          
        
          
            <a href="https://github.com/cloverTuan" target="_blank" class="nav-icn iconfont icon-github"></a>
          
        
      
    </div>
    <div class="menu">
      
        
            <a href="/" class="nav-menu ">HOME</a>
          
        
            <a href="/archives" class="nav-menu ">ARCHIVE</a>
          
        
            <a href="/about" class="nav-menu ">ABOUT</a>
          
        
      
    </div>
  </div>
</nav>
    <div id="main"><section class="article">
  <h2 class="title">20200830浦东App问题排查</h2>
  <p class="sub">Nov 29, 2020</p>
  <article class="content">
    <h2 id="记录下和老大调整服务器内存大小"><a href="#记录下和老大调整服务器内存大小" class="headerlink" title="记录下和老大调整服务器内存大小"></a>记录下和老大调整服务器内存大小</h2><p>周末没事来加个班写写东西。老大过来调整服务器内存，就帮忙托手。</p>
<p>首先是内存条 123 456 789 左右两边各9个内存条插槽。16G插满就有288G。</p>
<p>1、4、7 三个是白色，如果只有6根内存条，首先先插满左右两边各1、4、7白色插槽，规格最好差不多。如果是插到左右各123上服务器启动时会报warning。正常后，内存读写速度会到1066HZ左右。</p>
<p>如果继续往上插，123、456 左右各个插上之后，内存读写速度降到800HZ左右。以为遇到什么情况，网络文章有写到，插到两排或三排之后，内存读写频率就是会降低。以为同品牌不会，原来是本来就是这样的。</p>
<p>大概就这样，没事记录记录。</p>
<h2 id="浦东App问题排查"><a href="#浦东App问题排查" class="headerlink" title="浦东App问题排查"></a>浦东App问题排查</h2><p>公司浦东有业务: 政务微信-轻应用。我刚接手过来，也没得几个真机感受差距，代码也没有看，此时将之前一直暴露的问题让我来解决。客户大佬一次次给通牒（你们成不成，不成就换人，都一两年了，这么小的东西反反复复，根本解决不了）。</p>
<p>这个bug 是什么，时间回拨到一两年前：政务微信公司接手一个应用的开发，然后每每警察蜀黍使用的时候，开发轻应用，页面打不开，刷新，还是打不开，再刷新还是一样。过没一会，唉，又可以打开了，唉，刷新又不行了，唉退出去再进入又不行了。不同的机型、品牌 也有不同的功效。反正多多少少都有这种抓狂的遭遇。警察蜀黍打开的频率也不低，要用上的。</p>
<p>以上就是这个轻应用的体验了，2020年，毫无体验感，崩溃感。</p>
<p>相同的应用有另外的3家，这是重点！！！为什么人家就好好的？人家功能少？但你们咋就打都打不开！你们公司不是多么多么牛逼么？咋这都搞不好，还不如人家二手企业，人家丑，好用啊，你看。说着反复拨弄其他家的轻应用，然后恨铁不成钢气的把手机往桌子随手一放。然后又拿起手机，你看轻应用进去，还返回不了政务微信！我得把政务微信App 关闭，才能重新使用。你看看别家的会吗，你看看，你看看！！！说完，又是一气，就怕内伤了都。</p>
<p>我赶紧抓起客户手机操弄操弄，毕竟我之前做过移动客户端，好好感受下。在我反复操作，同时对比其他家应用时，立马感受到了轻应用的性质。</p>
<p>首先我们进入时，页面都进不去，顶部有进度条，就是读不完！然后左上角返回键点了根本无效。没有头绪。然后关闭政务微信App，再进来，资源读到一半，不读了，进度条也走完，这时是可以后退的。</p>
<p>那好，我们去其他轻应用试试。其他轻应用确实体量小，进去出来，每次都可以，，但是我就是要快，快次操作，体验下感到，当资源加载未及时完成时，左上角后退键就是无法使用的！！！</p>
<p>那很好，真相只有一个(帮我放一下柯南的背景音乐): 还是网络原因！！！</p>
<p>首先先把问题归类。归类完毕，那你们倒是赶紧解决这个网络问题啊，嗯嗯嗯，好好好，我都来了，肯定的，专攻。客户再三强调，要加紧啊，现在整个队伍大家内心都是崩溃的，那个气都能化为内功心法了。</p>
<p>回过头，我就好好感受下，网络慢原因。</p>
<p>首先我看到，互联网接入是可以很方便每次都能成功，偶尔的出现502 错误情况，应该确实是有网络波动。但是相对于政务微信的轻应用来说，这么高打不开页面频率肯定是有问题的。</p>
<p>由于政务微信难以测试，唯一能测的是右上角按钮打开浏览器。本手机浏览器打开也都能正常。于是优化了下webpack 打包出来的资源进行缩小。测试之下，没有什么不同。当前唯一我还没测到的点，就是他的入口: 我们提供服务的方式，是暴露端口出去，外部使用多个均衡链接进来的。这个点不晓得如何能更好的测试。此时一个新的消息到我们这: 另一个产商(下称LW.)需要占用我们的服务和入口，我们还有其他几个产商作为其子路径模块提供服务。</p>
<p>那就等吧，等他们整好，顺便让他们看看能不能解决这个无法打开的问题。毕竟他们是直接在我们的原位置上处理的。</p>
<p>过了一周，他们好了，我这也顺利改为子路径服务。但是还是提很卡很慢。而且！！！其他几个轻应用很顺畅！占用我们服务和入口的LW. 也很顺畅！LW. 内部其他几个子路径也很顺畅！</p>
<p>头一下大了，这，，，有点迷糊，不知道从哪个方面去思考，去入手。</p>
<p>赶紧去周末加班看看怎么回事。</p>
<p>看了接入的nginx log挺正常，无法得到有用信息。想了想会不会就是页面要压缩？感觉也不像。我们现在是PWA应用。资源是采用接口转发发送到客户端的。会不会就是这个原因？？试试？但是改起来好麻烦啊！</p>
<p>不管了，一点点来。再确认下可行性，看下LW. 他们产品怎么搭建的。根据nginx 配置，确认再确认了是这种配置。然后前往他们的页面文件目录，一看，他们也是vue 产品，但是他们就是分离根据nginx 来转发！！！</p>
<p>好的，确实有必要把页面抽离出来尝试一波。</p>
<p>根据抽离出来，放上去个错的，哎，果然，每次都能加载，每次都能！！！</p>

  </article>
  <footer class="f-cf">
    
      <a href="/2020/11/29/20200924前往母校校招/" class="link f-fl">⟵20200924前往母校校招</a>
    
    
      <a href="/2020/11/29/20200829ACME.sh生成ssl证书/" class="link f-fr">20200829ACME.sh生成ssl证书⟶</a>
    
  </footer>
</section></div>
    <footer id="footer" class="f-cf">
  d.guangying@foxmail.com
  
    
      
        · <a href="https://dribbble.com/clovertuan" target="_blank" class="nav-icn">Dribbble</a>
      
    
      
        · <a href="https://www.behance.net/clovertuan" target="_blank" class="nav-icn">Behance</a>
      
    
      
        · <a href="http://clovertuan.lofter.com/" target="_blank" class="nav-icn">Lofter</a>
      
    
      
        · <a href="https://www.instagram.com/clovertuan/" target="_blank" class="nav-icn">Instagram</a>
      
    
      
        · <a href="https://github.com/cloverTuan" target="_blank" class="nav-icn">GitHub</a>
      
    
  
  <span class="copyright">All rights reserved @Clover Tuan</span>
</footer>
  </div>
</body>
</html>